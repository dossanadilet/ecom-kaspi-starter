# üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Kaspi ML —Å Neon PostgreSQL

## üìã –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Neon

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [neon.tech](https://neon.tech)**
2. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å** (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ GitHub)
3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:**

   - –ù–∞–∑–≤–∞–Ω–∏–µ: `kaspi-ml-production`
   - –†–µ–≥–∏–æ–Ω: `US East (Ohio)` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - PostgreSQL –≤–µ—Ä—Å–∏—è: 16 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection String:**
   ```
   postgresql://username:password@ep-xyz-123.us-east-1.aws.neon.tech/neondb?sslmode=require
   ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
pip install psycopg2-binary alembic SQLAlchemy

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Neon
python neon_setup.py

# 3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python neon_migrate.py

# 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ CSV –¥–∞–Ω–Ω—ã–µ
python neon_data_loader.py

# 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
python neon_test.py
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Å–±–æ—Ä —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ PostgreSQL
python daily_monitor_neon.py

# ML pipeline —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Neon
python ml_sales_pipeline_neon.py
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Neon

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- **`products`** - —Ç–æ–≤–∞—Ä—ã (SKU, –Ω–∞–∑–≤–∞–Ω–∏—è, –±—Ä–µ–Ω–¥—ã)
- **`features_daily`** - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ñ–∏—á–∏ –¥–ª—è ML (–æ—Ç–∑—ã–≤—ã, —Ä–µ–π—Ç–∏–Ω–≥–∏, —Ü–µ–Ω—ã)
- **`price_history`** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω
- **`categories`** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **`merchants`** - –ø—Ä–æ–¥–∞–≤—Ü—ã
- **`offers`** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ —Å–Ω–∞–ø—à–æ—Ç—ã —Ü–µ–Ω

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤:

```sql
-- –¢–æ–≤–∞—Ä—ã —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—Ç–∑—ã–≤–æ–≤
SELECT p.title, (f.features->>'reviews')::int as reviews
FROM products p
JOIN features_daily f ON p.sku = f.sku
ORDER BY (f.features->>'reviews')::int DESC
LIMIT 10;

-- –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤ –ø–æ –¥–Ω—è–º
SELECT feature_date,
       SUM((features->>'reviews')::int) as total_reviews
FROM features_daily
GROUP BY feature_date
ORDER BY feature_date;
```

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Neon

### –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

- **üöÄ Serverless** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **üíæ –ë—Ä–∞–Ω—á–∏–Ω–≥ –ë–î** - –∫–∞–∫ Git –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **üìä –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - PostgreSQL –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **üîÑ –ê–≤—Ç–æ–±—ç–∫–∞–ø—ã** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **üåê –ì–ª–æ–±–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** - –¥–æ—Å—Ç—É–ø –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –º–∏—Ä–∞

### –î–ª—è ML –º–æ–¥–µ–ª–∏:

- **ü§ñ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã** - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
- **üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- **üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –ª–µ–≥–∫–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ BI —Å–∏—Å—Ç–µ–º–∞–º
- **‚ö° –ò–Ω–¥–µ–∫—Å—ã** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –º–∏–ª–ª–∏–æ–Ω–∞–º –∑–∞–ø–∏—Å–µ–π

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –§—É–Ω–∫—Ü–∏—è              | CSV —Ñ–∞–π–ª—ã  | Neon PostgreSQL      |
| -------------------- | ---------- | -------------------- |
| –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤    | –ú–µ–¥–ª–µ–Ω–Ω–æ   | ‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ      |
| –û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö         | –î–æ 100MB   | üöÄ –¢–µ—Ä–∞–±–∞–π—Ç—ã         |
| –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø | –ù–µ—Ç        | ‚úÖ –î–∞                |
| –ë—ç–∫–∞–ø—ã               | –†—É—á–Ω—ã–µ     | üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ    |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞            | Pandas     | üìä SQL + –∏–Ω–¥–µ–∫—Å—ã     |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏           | –û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã | üåê API + –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã |
| ML –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å        | ‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è | ü§ñ Enterprise        |

## üõ†Ô∏è –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ù–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Neon:

- `neon_setup.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `neon_migrate.py` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- `neon_data_loader.py` - –∑–∞–≥—Ä—É–∑–∫–∞ CSV –≤ PostgreSQL
- `neon_test.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `daily_monitor_neon.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `ml_sales_pipeline_neon.py` - ML pipeline –¥–ª—è PostgreSQL

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º–∏:

- `daily_monitor.py` - CSV –≤–µ—Ä—Å–∏—è
- `ml_sales_pipeline.py` - CSV –≤–µ—Ä—Å–∏—è
- –í—Å–µ CSV –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–ø–∫–µ `data/`

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å CSV** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–°–æ–∑–¥–∞–π—Ç–µ Neon –±–∞–∑—É** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
3. **–ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** - –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ CSV
4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –î–ª—è production:

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Neon** –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Neon dashboard
- **–°–æ–∑–¥–∞–π—Ç–µ dev/prod –≤–µ—Ç–∫–∏** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Neon –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–∂–µ—Ç:

- üìà **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤** –≤–º–µ—Å—Ç–æ —Ç—ã—Å—è—á
- ‚ö° **–ü–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ML –∑–∞ —Å–µ–∫—É–Ω–¥—ã** –≤–º–µ—Å—Ç–æ –º–∏–Ω—É—Ç
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è** –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
- üìä **–°—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É** —Å –ø–æ–º–æ—â—å—é SQL
- üåê **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏** —á–µ—Ä–µ–∑ API

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ Neon? –ó–∞–ø—É—Å—Ç–∏—Ç–µ:**

```bash
python neon_setup.py
```
